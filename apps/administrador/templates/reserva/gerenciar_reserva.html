{% extends 'base.html' %}
{% load static %}
{% block 'head' %}<link rel="stylesheet" href="{% static 'reserva/css/gerenciar-reserva.css'%}">{% endblock %}
{% block 'title' %}NinnaHub - Gerenciar Reservas{% endblock %}
{% block 'body' %}

{% include 'partials/_navbar-adm.html' %}
<main class="main-gerenciar-reserva">
  <div class="primeira-parte">
    <form action="{% url 'buscar_reserva' %}" method="POST">
      {% csrf_token %}
        <input type="text" name="buscar" placeholder="Pesquisar">
        <button class="butao-lupa" type="submit"><a href="#"><img src="{% static 'reserva/images/lupa.png' %}" alt="lupa" class="img-lupa"></a></button>
    </form>
  </div>
<div class="messages">{% include 'partials/_alertas.html' %}</div>
    <h1 class="h1_gerenciar-reserva" style="margin-top:40px">Gerenciar Reservas</h1>
    {%if registros%}
    <table class="table">
        <thead class="table-dark"> 
          <tr>
            <th>Empresa</th>
            <th>Responsável</th>
            <th>Espaço Reservado</th>
            <th>Responsavel pela a reserva</th>
            <th>Data de Reserva</th>
            <th>Hora de Inicio</th>
            <th>Hora de Término</th>   
          </tr>
        </thead>
        <tbody>
        {%for registro in registros %}
            <tr class="borda-table">
                <td>{{registro.empresa}}</td>
                <td>{{registro.agente}}</td>
                <td>{{registro.espacos}}</td>
                <td>{{registro.data_reserva}}</td>
                <td>{{registro.hora_inicio}}</td>
                <td>{{registro.hora_fim}}</td>
                <td class="td-btn_remover_usuario">
                    <button class="btn btn-danger btn-lg btn-remover" data-toggle="modal" data-target="#exampleModal{{registro.id}}">Remover usuário</button>
              </td>
                <!-- <td><a href="{% url 'cancelar_reserva' registro.id %}">Cancelar Reserva</a></td> -->
            </tr>
            <!-- Modal -->
            <div class="modal fade" id="exampleModal{{registro.id}}" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content" style="margin-top:150px">
                  <div class="modal-header">
                    <div class="container d-flex pl-0"><img id="imagem-modal"src="{% static 'reserva/images/logo-nina.png'%}"><h5 class="modal-title ml-2" id="exampleModalLabel">Realmente deseja deletar esse usuário?</h5></div>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                    <p class="text-muted">Deseja excluir o registro da empresa {{registro.empresa}} no dia {{registro.data_reserva}} com horário de {{registro.hora_inicio}} às {{registro.hora_fim}} permanentemente?</p>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-light" data-dismiss="modal">Voltar</button>
                    <a href="{% url 'cancelar_reserva' registro.id %}"><button type="button" class="btn btn-danger">Remover</button></a>
                  </div>
                </div>
              </div>
            </div>
        {%endfor%}
        </tbody>
      </table>
      {%else%}
      <div class="semdados"><img src="{% static 'reserva/images/ninna.png'%}"><h3>Nenhuma Reserva no momento</h3></div> 
  {%endif%}
</main>
   <!-- Começo do footer -->
   {% include 'partials/_footer.html' %}
   <!-- Final do footer -->
{% endblock %}